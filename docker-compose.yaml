version: '3.8'
services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      - ./dbdata:/app/dbdata
      - ./files:/app/files
    ports:
      - 8080:8080
    environment:
      - SECRET_KEY
      - DB_HOST
      - DB_USER
      - DB_PASSWORD
      - DB_NAME
      - DB_PORT
      - DB_DRIVER
#   environment:
#    - POSTGRES_PASSWORD=${DB_PASSWORD}
#    - POSTGRES_USER=${DB_USER}
#    - POSTGRES_DB=${DB_NAME}

#  db:
#   image: postgres:14-alpine
#   ports:
#    - ${DB_PORT}:${DB_PORT}
#   volumes:
#    - ~/apps/postgres:/var/lib/postgresql/data
#   environment:
#    - POSTGRES_PASSWORD=${DB_PASSWORD}
#    - POSTGRES_USER=${DB_USER}
#    - POSTGRES_DB=${DB_NAME}
